<!DOCTYPE html>
<html lang="ru" class="h-full">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>АЙТЫЫН – AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="/aityyn.png">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        gray: {
                            750: '#2D2E33',
                            850: '#1E1F20',
                            900: '#131314',
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.3s ease-out forwards',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': {
                                opacity: '0',
                                transform: 'translateY(10px)'
                            },
                            '100%': {
                                opacity: '1',
                                transform: 'translateY(0)'
                            },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .sidebar-panel {
            /* По умолчанию скрыт на мобильных, всегда виден на md+ */
            transform: translateX(-100%);
            /* Сдвиг за экран */
            transition: transform 0.3s ease-in-out;
            /* Плавный переход */
            z-index: 50;
            /* Выше всего, кроме модальных окон */
            position: fixed;
            /* Фиксированное положение на мобильном */
            height: 100%;
        }
        
        .sidebar-open {
            transform: translateX(0);
        }
        
        @media (min-width: 768px) {
            .sidebar-panel {
                transform: translateX(0) !important;
                position: relative;
            }
            .mobile-overlay {
                display: none !important;
            }
        }
    </style>
</head>

<body class="h-full text-gray-200 overflow-hidden flex">

    <aside id="sidebar-panel" class="w-[260px] bg-[#131314] p-3 flex flex-col gap-2 transition-all h-full rounded-r-3xl border-r border-white/5 fixed inset-y-0 left-0 sidebar-panel md:relative md:flex md:translate-x-0">
        <button onclick="newChat()" class="flex items-center gap-3 bg-[#282A2C] hover:bg-[#37393b] transition-colors rounded-full px-4 py-3 text-sm font-medium text-gray-200 w-max shadow-sm">
            <i data-lucide="plus" class="w-5 h-5 text-gray-400"></i>
            <span>Новый чат</span>
        </button>

        <div id="chat-history" class="flex-1 overflow-y-auto mt-4 space-y-1">
        </div>

        <button onclick="toggleSidebar()" class="absolute top-4 right-4 md:hidden p-2 text-gray-400 hover:text-white" aria-label="Закрыть меню">
            <i data-lucide="x" class="w-6 h-6"></i>
        </button>
    </aside>

    <div id="mobile-overlay" onclick="toggleSidebar()" class="fixed inset-0 bg-black/50 z-40 hidden md:hidden"></div>

    <main class="flex-1 flex flex-col relative h-full">

        <header class="h-16 flex items-center p-4 md:hidden bg-[#1E1F20] z-30 border-b border-white/5">
            <button onclick="toggleSidebar()" class="p-2 text-gray-400 hover:text-white" aria-label="Открыть меню чатов">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
            <div class="flex-1 text-center font-semibold text-lg truncate">АЙТЫЫН – AI</div>
        </header>


        <div class="absolute inset-0 overflow-hidden pointer-events-none">
            <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-purple-600/20 mix-blend-screen rounded-full filter blur-[120px] animate-blob opacity-70"></div>
            <div class="absolute top-1/2 left-[40%] -translate-x-1/2 -translate-y-[40%] w-[400px] h-[400px] bg-indigo-600/20 mix-blend-screen rounded-full filter blur-[120px] animate-blob animation-delay-2000 opacity-70"></div>
            <div class="absolute top-[60%] left-[60%] -translate-x-1/2 -translate-y-1/2 w-[400px] h-[400px] bg-green-500/10 mix-blend-screen rounded-full filter blur-[120px] animate-blob animation-delay-4000 opacity-50"></div>
        </div>

        <div id="chat-container" class="flex-1 overflow-y-auto p-4 md:p-8 space-y-6 scroll-smooth z-10 relative flex flex-col items-center justify-center transition-all duration-500">
            <div id="empty-state" class="text-center space-y-4 opacity-0 transition-opacity duration-700 ease-in" style="opacity: 1;">
            </div>
        </div>

        <div class="w-full p-4 z-20 relative flex justify-center">
            <div class="w-full max-w-3xl bg-[#282A2C] rounded-[28px] shadow-lg border border-white/5 flex flex-col transition-all duration-300 focus-within:border-white/10 focus-within:bg-[#303136]">

                <div id="file-preview-area" class="hidden flex items-center justify-between px-5 pt-3 pb-2 border-b border-white/10">
                    <div id="file-info" class="flex items-center gap-2 text-sm text-gray-400 truncate">
                    </div>
                    <button onclick="removeAttachment()" class="p-1 rounded-full text-gray-400 hover:text-white hover:bg-white/10 transition-colors shrink-0" aria-label="Удалить прикрепленный файл">
                        <i data-lucide="x" class="w-4 h-4"></i>
                    </button>
                </div>

                <div class="flex items-end px-4 py-3 md:py-4 w-full">
                    <input type="file" id="file-input" class="hidden" accept="image/*, text/*">
                    <button onclick="document.getElementById('file-input').click()" class="p-2 text-gray-400 hover:text-white transition-colors rounded-full hover:bg-white/10 mr-2 shrink-0">
                        <i data-lucide="plus" class="w-6 h-6"></i>
                    </button>

                    <textarea id="user-input" rows="1" placeholder="Спросите что-нибудь..." class="flex-1 bg-transparent outline-none resize-none max-h-[200px] py-1 text-gray-100 placeholder-gray-400/70 leading-6" style="min-height: 24px;" oninput="this.style.height = ''; this.style.height = Math.min(this.scrollHeight, 200) + 'px'"
                        onkeydown="handleKeyDown(event)"></textarea>

                    <button onclick="sendMessage()" id="send-button" class="p-2 text-white/50 bg-transparent rounded-lg transition-all duration-200 ml-2 shrink-0 disabled:opacity-30 enabled:hover:text-white enabled:bg-white/10">
                         <i data-lucide="arrow-up" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
            <div class="text-xs text-gray-500 absolute bottom-1 text-center w-full">
                Сделано студентом из РКИ-25 – Иванов Андрей
                <a href="andrey.html" style="
  color: #9500ff;
  text-decoration: underline;      /* подчеркнутый текст */
">
  СПОНСИРОВАТЬ
</a>

            </div>
        </div>

    </main>

    <script src=" script.js "></script>
</body>

</html>
